datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       Int      @id @default(autoincrement())
  name     String
  records  Record[]
  categories Category[]
}

model Category {
  id     Int     @id @default(autoincrement())
  name   String
  type   String  // "income" 或 "expense"
  user   User    @relation(fields: [userId], references: [id])
  userId Int
  records Record[]
}

model Record {
  id         Int       @id @default(autoincrement())
  amount     Int       // 以分为单位，避免浮点误差
  date       DateTime  @default(now())   
  note       String?
  category   Category  @relation(fields: [categoryId], references: [id])
  categoryId Int
  user       User      @relation(fields: [userId], references: [id])
  userId     Int
}
